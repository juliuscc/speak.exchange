(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"0tVQ":function(e,t,n){n("FlQf"),n("VJsP"),e.exports=n("WEpk").Array.from},BAk0:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/view-deck",function(){return n("xds4")}])},VJsP:function(e,t,n){"use strict";var r=n("2GTP"),o=n("Y7ZC"),a=n("JB68"),c=n("sNwI"),i=n("NwJ3"),d=n("tEej"),u=n("IP1Z"),s=n("fNZA");o(o.S+o.F*!n("TuGD")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,l,p=a(e),f="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,g=void 0!==m,b=0,y=s(p);if(g&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==y||f==Array&&i(y))for(n=new f(t=d(p.length));t>b;b++)u(n,b,g?m(p[b],b):p[b]);else for(l=y.call(p),n=new f;!(o=l.next()).done;b++)u(n,b,g?c(l,m,[o.value,b],!0):o.value);return n.length=b,n}})},VVoN:function(e,t,n){"use strict";var r=n("vOnD"),o=n("55GN"),a=r.c.div.withConfig({displayName:"Container",componentId:"sc-1v56vj7-0"})(["width:80%;max-width:960px;margin:0 auto;padding:0 20px;box-sizing:border-box;position:relative;@media screen and (max-width:","){width:85%;}@media screen and (max-width:","){width:100%;}"],o.a.tablet.max,o.a.smallPhone.max);t.a=a},XsGP:function(e,t,n){"use strict";var r=n("q1tI"),o=n.n(r),a=n("vOnD"),c=n("hfKm"),i=n.n(c),d=n("2Eek"),u=n.n(d),s=n("XoMD"),l=n.n(s),p=n("Jo+v"),f=n.n(p),h=n("4mXO"),m=n.n(h),g=n("pLtp"),b=n.n(g),y=n("p0XB"),w=n.n(y);var k=n("d04V"),v=n.n(k),x=n("yLu3"),C=n.n(x);function _(e){return function(e){if(w()(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(C()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return v()(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var N=n("vYYK"),I=n("nOHt"),D=n("iqUP"),j=n.n(D),O=n("slLH"),E=n("WdAl");function V(e,t){var n=b()(e);if(m.a){var r=m()(e);t&&(r=r.filter((function(t){return f()(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(N.a)(e,t,n[t])})):l.a?u()(e,l()(n)):V(Object(n)).forEach((function(t){i()(e,t,f()(n,t))}))}return e}var W=function(){var e=Object(I.useRouter)(),t=e.query.id,n=Object(r.useContext)(O.b),o=Object(r.useReducer)((function(e,t){switch(t.type){case"error":return B({},e,{status:"rejected",error:t.error});case"fetch":return B({},e,{status:"fetching"});case"success":switch(e.status){case"fetching":return B({},e,{status:"resolved",deck:t.deck});case"uploading":return B({},e,{status:"resolved",edited:!1});default:return B({},e)}case"submit_changes":return B({},e,{status:"uploading"});case"local_update":return B({},e,{edited:!0,deck:t.updateFn(e.deck)});default:throw new Error("Unhandled action type: ".concat(t.type))}}),{status:"start",deck:null,error:null,edited:!1}),a=o[0],c=o[1];Object(r.useEffect)((function(){var e=!1;return c({type:"fetch"}),E.a.collection("decks").doc(t).get().then((function(t){if(!e){if(!t.exists)throw new Error("The deck could not be found. Try going back to your decks, and trying this action again.");c({type:"success",deck:t.data()})}})).catch((function(t){return e||c({type:"error",error:t})})),function(){e=!0}}),[t]);return{status:a.status,deck:a.deck,error:a.error,edited:a.edited,updateName:function(e){return c({type:"local_update",updateFn:function(t){return B({},t,{name:e})}})},updateCard:function(e){return function(t,n){return c({type:"local_update",updateFn:function(r){var o=r.cards.map((function(r,o){return o!==e?r:B({},r,Object(N.a)({},t,n))}));return B({},r,{cards:o})}})}},addCard:function(){return c({type:"local_update",updateFn:function(e){return B({},e,{cards:[].concat(_(e.cards),[{original:"",translation:""}])})}})},submitChanges:function(){c({type:"submit_changes"}),E.a.collection("decks").doc(t).set(a.deck).then((function(){c({type:"success"})})).catch((function(e){return c({type:"error",error:e})}))},id:t,removeCard:function(e){return function(){return c({type:"local_update",updateFn:function(t){return B({},t,{cards:t.cards.filter((function(t,n){return n!==e}))})}})}},removeDeck:function(){c({type:"submit_changes"}),E.a.collection("decks").doc(t).delete().then((function(){e.push("/repeat")})).catch((function(e){return c({type:"error",error:e})}))},uid:n.user&&n.user.uid,copyDeck:function(){c({type:"submit_changes"});var t=B({},a.deck,{uid:n.user.uid,createdAt:j.a.firestore.FieldValue.serverTimestamp(),name:"copy of ".concat(a.deck.name)});return E.a.collection("decks").add(t).then((function(){e.push("/repeat")})).catch((function(e){return c({type:"error",error:e})}))}}},T=n("2iwK"),A=n("uX9c"),F=o.a.createElement,P=a.c.div.withConfig({displayName:"withDeck__SpinnerContainer",componentId:"c9bzi-0"})(["position:relative;"]);t.a=function(e){var t=W(),n=t.status,r=t.deck,o=t.error,a=t.edited,c=t.updateName,i=t.updateCard,d=t.addCard,u=t.submitChanges,s=t.id,l=t.removeCard,p=t.removeDeck,f=t.uid,h=t.copyDeck;return"start"===n||"fetching"===n?F(P,null,F(T.c,null)):"resolved"===n?F(e,{name:r.name,cards:r.cards,updateName:c,updateCardWithIndex:i,addCard:d,submitChanges:u,edited:a,id:s,removeCardWithIndex:l,removeDeck:p,uid:f,deck:r,copyDeck:h}):"uploading"===n?F(P,null,F(e,{name:r.name,cards:r.cards,updateName:c,updateCardWithIndex:i,addCard:d,submitChanges:u,edited:a,loading:!0,id:s,removeCardWithIndex:l,removeDeck:p,uid:f,deck:r,copyDeck:h}),F(T.c,null)):(console.error(o),F(A.a,null,o&&o.message||"Something went wrong. Try going back to your decks or refreshing the page after a while."))}},d04V:function(e,t,n){e.exports=n("0tVQ")},wHcE:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var r=n("qNsG"),o=n("q1tI"),a=n.n(o),c=n("vOnD"),i=a.a.createElement,d=c.c.button.withConfig({displayName:"Button",componentId:"hh7xaw-0"})(["background:",";padding:10px 20px;border:1px ",";border-style:solid;border-radius:10px;color:",";cursor:pointer;height:43.5px;font-size:14px;:hover:not(:disabled){opacity:0.5;}:disabled{background:",";cursor:not-allowed;}"],(function(e){var t=e.theme;return e.cancel?t.colors.black:t.colors.primary}),(function(e){return e.theme.colors.border}),(function(e){return e.theme.colors.white}),(function(e){return e.theme.colors.primaryMutedInactive})),u=Object(c.c)(d).withConfig({displayName:"Button__FixedSizeButton",componentId:"hh7xaw-1"})(["width:43.5px;padding:0%;"]),s=Object(c.c)(d).withConfig({displayName:"Button__DangerButton",componentId:"hh7xaw-2"})(["background-color:",";"],(function(e){return e.theme.colors.danger})),l=function(e){var t=e.icon,n=Object(r.a)(e,["icon"]),o=Object(c.c)(t).withConfig({displayName:"Button__StyledIcon",componentId:"hh7xaw-3"})(["color:",";width:20px;"],(function(e){return e.theme.colors.white}));return i(u,n,i(o,null))}},xds4:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),o=n.n(r),a=n("JTPn"),c=n("vOnD"),i=n("YFqc"),d=n.n(i),u=n("VVoN"),s=o.a.createElement,l=c.c.div.withConfig({displayName:"WordCard",componentId:"sc-1jnzmp3-0"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100px;border-radius:10px;background-color:",";font-family:",";color:",";padding:20px;margin-top:20px;"],(function(e){return e.theme.colors.white}),(function(e){return e.theme.fonts.text}),(function(e){return e.theme.colors.blac})),p=c.c.div.withConfig({displayName:"WordCard__Word",componentId:"sc-1jnzmp3-1"})(["text-align:center;border-style:none;width:250px;font-size:16px;&:focus{outline:none;}"]),f=c.c.hr.withConfig({displayName:"WordCard__Seperator",componentId:"sc-1jnzmp3-2"})(["width:300px;height:10px;border:0.5px solid ",";"],(function(e){return e.theme.colors.border})),h=function(e){var t=e.card;return s(l,null,s(p,null,t.original?t.original:"Original Word"),s(f,null),s(p,null,t.translation?t.translation:"Translation"))},m=n("wHcE"),g=n("55GN"),b=o.a.createElement,y=c.c.fieldset.withConfig({displayName:"ViewDeck__Background",componentId:"b4biry-0"})(["background-color:",";width:100%;border:none;padding:0;margin:0;:disabled{opacity:0.5;}"],(function(e){return e.theme.colors.focusBackground})),w=c.c.div.withConfig({displayName:"ViewDeck__TitleBar",componentId:"b4biry-1"})(["display:flex;width:100%;height:100%;padding-top:20px;align-items:center;"]),k=c.c.div.withConfig({displayName:"ViewDeck__DeckName",componentId:"b4biry-2"})(["min-width:0;font-weight:800;@media screen and (max-width:","){flex:1;}"],g.a.tablet.max),v=c.c.div.withConfig({displayName:"ViewDeck__ButtonsWrapper",componentId:"b4biry-3"})(["margin-left:auto;display:flex;flex-direction:row;& > *{margin-left:10px;}"]),x=c.c.div.withConfig({displayName:"ViewDeck__WordsWrapper",componentId:"b4biry-4"})(["padding-bottom:50px;"]),C=function(e){var t=e.name,n=e.cards,r=e.id,a=e.removeDeck,c=e.uid,i=e.deck,s=e.copyDeck;return b(y,null,b(u.a,null,b(w,null,b(k,null,t),b(v,null,c===i.uid?b(d.a,{key:r,href:"/edit-deck?id=".concat(r)},b(m.a,{type:"button"},"Edit deck")):b(m.a,{type:"button",onClick:s,disabled:null===c},"Copy deck"),c===i.uid?b(o.a.Fragment,null,b(d.a,{href:"/repeat"},b(m.a,{type:"button",cancel:!0},"Go back")),b(m.b,{type:"button",onClick:a},"Delete")):b(d.a,{href:"/all-decks"},b(m.a,{type:"button",cancel:!0},"Go back")))),b(x,null,n.map((function(e,t){return b(h,{key:t,card:e},"Test")})))))},_=n("XsGP"),N=o.a.createElement,I=function(){return Object(_.a)(C)};t.default=function(){return N(o.a.Fragment,null,N(a.a,null),N(I,null))}}},[["BAk0",1,2,4,5,6,0,3,7]]]);